---
title: Git的簡單統計 用指令
date: 2014-08-28T13:48:00.000+08:00
tags: 
- Git

categories:
- 舊部落格移植文章
---

# Git的簡單統計 用指令

原文連結: https://darkblack01.blogspot.com/2014/08/git.html
移植時的最後更新日期: 2014-08-28T13:50:39.308+08:00

之前有介紹使用GitStats的工具來統計Git的log。<br />它會像Github一樣給你這個專案從頭到目前的各式各樣統計結果。<br />非常的好玩，而且不管是安裝還是使用上也相當簡單。<br /><br />不過！它只不支援Windows。<br /><br />那Windows的使用者怎辦？我也想統計呀？！<br />難道一定要上傳Github?(誤)<br />搞一個Linux的VM?(誤)<br />把Git弄得更熟練!!!!!!<br /><br />「Git很神，一定有這功能的！」<br /><br />就這樣找呀找。<br />終於找到一些有趣的來玩。<br /><br /><h2><span style="font-size: x-large;">第一招</span></h2>顯示每一次commit的日期、作者(這個可以自訂[1])<br />檔案修改、增加的行數、去除掉的行數<br /><h3><span style="font-size: large;">顯示的結果如下</span></h3><pre class="prettyprint"><code class="language-bash">Mon Aug 18 16:48:42 2014 +0800 Ken<br />1 file changed, 2 insertions(+), 2 deletions(-)<br /><br />Mon Aug 18 16:12:16 2014 +0800 Ken<br />4 files changed, 57 insertions(+), 39 deletions(-)<br /><br />Thu Aug 14 16:51:22 2014 +0800 Ken<br />1 file changed, 7 insertions(+), 5 deletions(-)<br /><br />Thu Aug 14 14:35:53 2014 +0800 Ken<br />1 file changed, 7 insertions(+), 5 deletions(-)<br />...</code></pre><h3><span style="font-size: large;">在Bash下指令</span></h3><pre class="prettyprint"><code class="language-bash">git log --shortstat --pretty=format:"%cd %an" --author=ken --since="2014-05-06"</code></pre><br /><h3><span style="font-size: large;">參數說明</span></h3>--shortstat &nbsp; &nbsp; 簡短的統計內容<br />--pretty=format:"%cd %an" &nbsp; &nbsp; 每個commit的標題指定格式(在此指定: 日期、作者)<br />--author=ken &nbsp; &nbsp;過濾作者字串<br /><br />--author &nbsp; &nbsp;列出作者名稱符合指定字串的更新。<br />--committer &nbsp; &nbsp; 列出提交者名稱符合指定字串的更新。<br /><br /><h4><b>限制時間區間</b></h4>--since="2014-05-06"<br />從2014/05/06開始找<br /><br />-(n) &nbsp; &nbsp;僅顯示最後 n 個更新<br />--since, --after &nbsp; &nbsp; &nbsp;列出特定日期後的更新。<br />--until, --before &nbsp; &nbsp; 列出特定日期前的更新。<br /><br /><h2><span style="font-size: x-large;">第二招[2]</span></h2>統計commit的數目<br /><h3><span style="font-size: large;">顯示的結果如下</span></h3><pre class="prettyprint"><code class="language-bash">   356  chris<br />   317  YuKai<br />   113  Ken Tseng<br />    70  Kimi Lu<br />    37  vul3yo6<br />    29  Ken</code></pre><h3><span style="font-size: large;">在Bash下指令</span></h3><pre class="prettyprint"><code class="language-bash">git shortlog --numbered --summary</code></pre><br /><h3><span style="font-size: large;">參數說明</span></h3>--numbered  依commit數目排序(原本預設是依作者字母順序排列)<br />--summary  不顯示commit的標題文字，只顯示統計數字<br /><br /><h2><span style="font-size: x-large;">第三招[2]</span></h2>顯示這個專案所有時間統計下來的<br />作者、修改檔案數、增加行數、刪除行數、增加行數-刪除行數<br /><h3><span style="font-size: large;">顯示結果</span></h3><pre class="prettyprint"><code class="language-bash">chris,:  9497 fils, (+)1513667 (-)473535 = 104013<br />chris,vul3yo6,:  5 fils, (+)28 (-)28 = 0<br />chris,yukai,:  20 fils, (+)426 (-)454 = -28<br />vul3yo6,:  989 fils, (+)184025 (-)15499 = 168526<br />vul3yo6,yukai,:  25 fils, (+)936 (-)460 = 476<br />yukai,:  4859 fils, (+)689366 (-)338120 = 351246<br />yukai,chris,:  76 fils, (+)5127 (-)825 = 4302<br />yukai,vul3yo6,:  22 fils, (+)315 (-)44 = 271<br />yukai,zc1145,:  12 fils, (+)45 (-)39 = 6<br />zc1145,:  453 fils, (+)27439 (-)6025 = 21414<br />zc1145,yukai,:  38 fils, (+)866 (-)264 = 602<br />zc1145,yukai,vul3yo6,: 7 fils, (+)749 (-)71 = 678</code></pre><h3><span style="font-size: large;">在Bash下指令(超長的)</span></h3><pre class="prettyprint"><code class="language-bash">git log --shortstat --pretty="%cE" | sed 's/\(.*\)@.*/\1/' | grep -v "^$" | awk 'BEGIN { line=""; } !/^ / { if (line=="" || !match(line, $0)) {line = $0 "," line }} /^ / { print line " # " $0; line=""}' | sort | sed -E 's/# //;s/ files? changed,//;s/([0-9]+) ([0-9]+ deletion)/\1 0 insertions\(+\), \2/;s/\(\+\)$/\(\+\), 0 deletions\(-\)/;s/insertions?\(\+\), //;s/ deletions?\(-\)//' | awk 'BEGIN  {name=""; files=0; insertions=0; deletions=0;}  {if ($1 != name &amp;&amp; name != "")  { print name ":  " files " fils, (+)" insertions " (-)" deletions " = " insertions-deletions ; files=0; insertions=0; deletions=0; name=$1; }  name=$1; files+=$2; insertions+=$3; deletions+=$4} END {print name ": " files " fils, (+)" insertions " (-)" deletions " = " insertions-deletions ;}'</code></pre><br />參考資料：<br />[1]&nbsp;<a href="http://git-scm.com/book/zh-tw/Git-%E5%9F%BA%E7%A4%8E-%E6%AA%A2%E8%A6%96%E6%8F%90%E4%BA%A4%E7%9A%84%E6%AD%B7%E5%8F%B2%E8%A8%98%E9%8C%84" target="_blank">2.3 Git 基礎 - 檢視提交的歷史記錄</a><br />[2] <a href="http://blog.eisneim.com/articles/2014-8-16-git-analize-caulculate-contribution.html" target="_blank">统计本地Git仓库中不同贡献者的代码行数的一些方法</a>
