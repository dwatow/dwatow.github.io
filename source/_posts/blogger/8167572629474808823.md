---
title: C++單元測試(2) - 用VC6編譯CppUnit
date: 2014-08-06T00:38:00.001+08:00
tags: 
- TDD
,- C_and_Cpp

categories:
- 舊部落格移植文章
---

# C++單元測試(2) - 用VC6編譯CppUnit

原文連結: https://darkblack01.blogspot.com/2014/08/c2-cppunit.html
移植時的最後更新日期: 2015-12-23T14:16:57.746+08:00

接續<a href="http://darkblack01.blogspot.tw/2014/07/cppunit.html">前一編</a><br />「事不疑遲，快到<a data-mce-href="http://cgit.freedesktop.org/libreoffice/cppunit/?h=cppunit-1-13" href="http://www.freedesktop.org/wiki/Software/cppunit/" shape="rect" style="border: 0px; color: #047ac6; line-height: 1.428571em; margin: 0px; padding: 0px;" target="_blank">freedesktop下載</a>最新版吧！」 <br /><br />這一版的CppUnit，自帶VC6和VS2010的兩個不同的VS專案檔，這一篇就先介紹使用VC6的路上要突破的重重挫折。<br /><br />使用環境<br />Windows 7<br />Visual C++ 6<br /><ol><li>安裝Visual C++ 6，git for windows</li><li>        clone CppUnit，並且切換到cppunit-1-13的分支。<br />master的PlugInManager.cpp檔Line:3會出現「找不到stdint.h」的error<br />而這個分支，直接砍掉出問題的這一行.....<br /><pre class="prettyprint"><code class="language-bash">$git clone git://anongit.freedesktop.org/git/libreoffice/cppunit/<br />%(git dir)$git checkout cppunit-1-13</code></pre></li><li>        再打開 src/CppUnitLibraries.dsw<br />        <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-18pcUQNTX_w/U-EDSQJIWwI/AAAAAAAAHYw/nqgnlD8XFpk/s1600/pathCppUnit.png" imageanchor="1" style="line-height: 1.428571em; margin-left: 1em; margin-right: 1em; text-align: center;">                <img border="0" src="http://1.bp.blogspot.com/-18pcUQNTX_w/U-EDSQJIWwI/AAAAAAAAHYw/nqgnlD8XFpk/s1600/pathCppUnit.png" />            </a>        </div></li><li>        編譯 每一個 專案<br />        編譯條件有四種，通通都要編一下Win32 Release, Win32 Debug, Win32 Release Unicode, Win32 Debug Unicode         對每一個專案檔進行各別編譯 Build(selection only)<br />        順序如下試一下就知道了。<br />        這一步會出現一些error，得慢慢的一個一個解。(下面有一些可以參考的經驗)<br />        <div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-dpTwi9KB2ZQ/U-EDSa6epKI/AAAAAAAAHY4/6n3DYcXiUv8/s1600/CppUnitinVC6.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;">                <img border="0" src="http://3.bp.blogspot.com/-dpTwi9KB2ZQ/U-EDSa6epKI/AAAAAAAAHY4/6n3DYcXiUv8/s1600/CppUnitinVC6.png" height="366" width="640" />            </a>        </div></li><li>        在lib/可以找到編譯好的檔案<br />我編出來有23個檔案。<br />        <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Ex6lF-Ky30w/U-oNxNfAJJI/AAAAAAAAHaI/JQUHxCkRGtw/s1600/build_cppunit_result.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-Ex6lF-Ky30w/U-oNxNfAJJI/AAAAAAAAHaI/JQUHxCkRGtw/s1600/build_cppunit_result.png" /></a></div></li></ol><br /><h3>編譯出現error</h3><ul><li>        <span style="font-family: Courier New, Courier, monospace;">            <b>cdxCDynamicDialog.cpp(30) : error C2440</b>        </span>        這是timer的參數型別出問題。<br />        只要把         <pre class="prettyprint"><code>void cdxCDynamicDialog::OnTimer(UINT_PTR idEvent)</code></pre>改成<br />        <pre class="prettyprint"><code>void cdxCDynamicDialog::OnTimer(UINT idEvent)</code></pre></li><li>        <span style="line-height: 22.857135772705078px;">            <span style="font-family: Courier New, Courier, monospace;">                <b>TreeHierarchyDlg.cpp(106) : error C2065</b>            </span>        </span><br />        <span style="line-height: 22.857135772705078px;">m_treeTests.SetItemData(...)</span>        參數型別出問題。(改法類似上一點)     </li><li>        <span style="font-family: Courier New, Courier, monospace;">            <b>TreeHierarchyDlg.cpp(188) : error C2065</b>        </span><br />        Text::data; 型別出問題(改法類似上一點)     </li></ul>這樣就已經取得聖杯了。<br />剩下的就是怎麼使用它了！下次我們再來介紹吧！
