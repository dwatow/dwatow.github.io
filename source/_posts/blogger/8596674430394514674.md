---
title: K&R2心得//小筆記
date: 2011-05-13T11:52:00.000+08:00
tags: 
- C_and_Cpp
,- KnR2

categories:
- 舊部落格移植文章
---

# K&R2心得//小筆記

原文連結: https://darkblack01.blogspot.com/2011/05/k.html
移植時的最後更新日期: 2015-12-23T14:16:57.749+08:00

因為K&amp;R2到後面真的是太難了！XDDD<br />（我想K&amp;R會不會想「我發明充滿美的C語言，因為 C++的影響變成了這種醜醜又難用的樣子」而不開心？）<br /><br />所以，來寫個小筆記吧！<br /><br /><a name='more'></a><br /><br /><strong><span style="font-size: 24px;">union</span></strong><br />宣告一個記憶體空間，存放不同的type在同一個記憶體空間（一次當作一種type）<br />時而int，時而char，時而double或long，使用者可以自行自訂<br />起始位址都是同一個，與structure類似。<br /><br /><strong><span style="font-size: 24px;">structure</span></strong><br />宣告一個記憶體空間，存放不同的type在連續記憶體空間<br />包含任何能宣告的方式（包含自己的指標）<br />起始位址相鄰，與陣列相類似<br /><br /><strong><span style="font-size: 24px;">陣列</span></strong><br />宣告一個記憶體空間，存放相同的type在連續的記憶體空間（一次宣告一種type）<br />這些type在程式開始時存在，不可以增減（若要增減，則要使用動態記憶體宣告）<br /><br /><br /><br /><br /><strong><span style="font-size: 24px;">typedef</span></strong><br />將後面宣告的變數抄寫到相對應的定義字上<br /><br />//typedef只是定義了type的別名（參考），並不會增加新的資料型態<br /><span style="color: red;">typedef unsigned char PIXEL[30]</span><br />...<br />//後面這樣宣告變數<br /><span style="color: blue;">PIXEL colorR;</span><br />//等同於這樣（把字抄上去）<br /><span style="color: red;">typedef unsigned char <span style="color: blue;">colorR<span style="color: red;">[30]</span></span>;</span><br />再將typedef刪掉，放置在變數宣告的地方，就是同義動作<br /><span style="color: red;"><s>typedef</s> unsigned char&nbsp;<span style="color: blue;">colorR</span></span><span style="color: red;"><span style="color: blue;"><span style="color: red;">[30]</span></span>;</span><br /><br /><span style="color: red;">unsigned char&nbsp;</span><span style="color: red;"><span style="color: blue;">colorR</span></span><span style="color: red;"><span style="color: blue;"><span style="color: red;">[30]</span></span>;</span><br /><br /><br />和 #define 的用法很像<br /><br /><span style="color: red;">#define ABC ORZ</span><br />意思是只要出現ABC就把這個字用ORZ替換掉（把字抄下來）<br /><br /><span style="color: blue;">int ABC[30] ;</span><br />等於<br /><span style="color: blue;">int <span style="color: red;">ORZ</span>[30];</span><br /><br /><br /><span style="font-size: 24px;">修飾字</span><br /><br /><strong><span style="font-size: 24px;">const</span></strong><br />&nbsp;的真正意義是「唯讀」<br /><br /><br /><br />在此，typedef和const合體加上宣告指標，就成為可怕令人搞混的鬼東西了！<br />以下有整理一下！請詳讀：<br /><br /><br /><span style="font-size: 20px;"><strong>//唯讀指標</strong></span><br /><span class="Apple-tab-span" style="white-space: pre;"> </span><span style="color: blue;">int&nbsp;</span>*const icp = &amp;i2; &nbsp;&nbsp;<span style="color: #a2a2a2;">//常數指標 const pointer</span><br /><span style="color: #a2a2a2;">// &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; icp = iptr; &nbsp; //ItP可以改值，不可以改址</span><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *icp = 3;<br /><br /><br /><span style="color: blue;">typedef </span>string *sp; <span style="color: #a2a2a2;">//指標 &nbsp;Printer</span><br /><br /><br />&nbsp; &nbsp;string s1;<br /><br />&nbsp; &nbsp;string s2;<br />&nbsp; &nbsp;string *sptr = 0;<br /><br /><span style="color: #a2a2a2;">&nbsp; &nbsp;//唯讀指標（指標變唯讀）</span><br />&nbsp; &nbsp;sp <span style="color: blue;">const </span>SpCP = &amp;s1;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;*SpCP = "changed"; &nbsp;<span style="color: #a2a2a2;">//OK</span><br /><span style="color: #a2a2a2;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; SpCP = sptr; &nbsp;//NG 可以改值，不可以改址（ItP）</span><br /><br />&nbsp; &nbsp;<span style="color: #a2a2a2;">//唯讀指標（唯讀的指標）</span><br />&nbsp; &nbsp;<span style="color: blue;">const </span>sp CSpP = &amp;s2;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; *CSpP = "changed"; &nbsp;<span style="color: #a2a2a2;">//OK</span><br /><span style="color: #a2a2a2;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CSpP = sptr; &nbsp;//NG 可以改值，不可以改址（ItP）</span><br /><span style="color: #a2a2a2;"><br /><br /></span><br /><span style="color: #a2a2a2;"><br /></span><br /><span style="font-size: 20px;"><strong>//唯讀存取</strong></span><br /><span class="Apple-tab-span" style="white-space: pre;"><span style="color: #a2a2a2;"> </span></span><span style="color: blue;">const&nbsp;</span>int *cip = &amp;i1; &nbsp;<span style="color: #a2a2a2;">//pointer to const</span><br /><span style="color: #a2a2a2;">//<span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *cip = 3; &nbsp; &nbsp;//PtC 不可以改值，可以改址</span><span class="Apple-tab-span" style="white-space: pre;"> </span><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cip = iptr;<br /><br /><br /><span style="color: blue;">typedef </span><span style="color: blue;">const </span>string *csp; &nbsp;<span style="color: #a2a2a2;">//唯讀存取的指標Pointer to const</span><br /><br /><span style="color: #a2a2a2;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #a2a2a2;">//唯讀存取</span><br /><span style="color: #a2a2a2;"></span><br /><div style="color: black;"><span style="color: #a2a2a2;"><span class="Apple-tab-span" style="white-space: pre;"> </span>csp CSP = &amp;s1;</span><br /><div style="color: black;"><span style="color: #a2a2a2;"><span style="color: #a2a2a2;">//<span style="color: black;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: black;">&nbsp; &nbsp;&nbsp;</span>&nbsp;*CSP = "changed"; &nbsp;//NG</span></span><br /><div style="color: black;"><span style="color: #a2a2a2;"><span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp; &nbsp; &nbsp;&nbsp;CSP = sptr; <span style="color: #a2a2a2;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //OK 不可以改值，可以改址（ItP）</span></span><br /><div style="color: black;"><span style="color: #a2a2a2;"><br /></span></div></div></div></div>
