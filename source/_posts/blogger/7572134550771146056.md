---
title: "CFont"
date: 2012-05-11T09:02:00.002+08:00
tags: 
- "WIN32 API/MFC"
categories:
- 舊部落格移植文章
---

# CFont

原文連結: https://darkblack01.blogspot.com/2012/05/cfont.html
移植時的最後更新日期: 2012-05-22T09:54:50.158+08:00

<b><span style="color: #999999;">//建立字型的用法</span></b><br />CreateFont( &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;m_font.CreateFont(<br /><span style="white-space: pre;">&nbsp;   int nHeight,                    </span>18, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #999999;">//指定想要的高度（邏輯單位）的字體。</span><br /><span style="white-space: pre;">&nbsp;   int nWidth,                      </span>0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//指定平均寬度（邏輯單位）中的字符的字體。</span><br /><span style="white-space: pre;">&nbsp;   int nEscapement,              </span>0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//指定角度（以0.1度為單位），旋轉刻度向量與x軸的夾角。</span><br /><span style="white-space: pre;">&nbsp;   int nOrientation,               </span>0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//指定角度（以0.1度為單位）之間的字符基線和X軸。</span><br /><span style="white-space: pre;">&nbsp;   int nWeight,                     </span>FW_REGULAR, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #999999;">//指定字體的粗細（以像素為單位，每簽訂1000）。</span><br /><span style="white-space: pre;">&nbsp;   BYTE bItalic,                    </span>FALSE, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//指定字體是否</span><span style="color: #999999;">加</span><span style="color: #999999;">斜體。</span><br /><span style="white-space: pre;">&nbsp;   BYTE bUnderline,              </span>FALSE, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//指定字體是否</span><span style="color: #999999;">加</span><span style="color: #999999;">下劃線。</span><br /><span style="white-space: pre;">&nbsp;   BYTE cStrikeOut,              </span>FALSE, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//指定字體是否加刪除線。</span><br /><span style="white-space: pre;">&nbsp;   BYTE nCharSet,               </span>SYMBOL_CHARSET, &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #999999;">//指定字集（符號、西歐、BIG5之類的）</span><br /><span style="white-space: pre;">&nbsp;   BYTE nOutPrecision,          </span>OUT_DEFAULT_PRECIS, &nbsp; &nbsp;<span style="color: #999999;">//指定所需的輸出精度。</span><br /><span style="white-space: pre;">&nbsp;   BYTE nClipPrecision,          </span>CLIP_DEFAULT_PRECIS, &nbsp; <span style="color: #999999;">//指定所需的剪切精度。 剪輯精度定義了如何剪輯字符的剪輯區域以外的部分。</span><br /><span style="white-space: pre;">&nbsp;   BYTE nQuality,                 </span>DEFAULT_QUALITY, &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//指定字體的輸出質量，它定義如何精心的GDI必須嘗試匹配邏輯字體屬性的一個實際的物理字體。</span><br /><span style="white-space: pre;">&nbsp;   BYTE nPitchAndFamily,      </span>FIXED_PITCH, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//指定的字距和群組（Family）的字體。</span><br /><span style="white-space: pre;">&nbsp;   LPCTSTR lpszFacename      </span>"Webdings"); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #999999;">//一個 CString的 或指針為空結束的字符串，指定字體名稱的字體。</span><br /><br /><a name='more'></a><br /><br /><span style="color: #999999;"><b>//幫Buttom設定字型</b></span><br />&nbsp; &nbsp; pBtmOK-&gt;SetFont(&amp;m_font); &nbsp;//╳<br />&nbsp; &nbsp; pBtmMax-&gt;SetFont(&amp;m_font); //□<br /><br /><br /><b><span style="font-size: large;">在View使用Font要注意的流程</span></b><br /><br /><span style="color: #999999;">//宣告DC</span><br /><span style="color: #999999;">//宣告字型</span><br /><span style="color: #999999;">&nbsp; &nbsp; //創建字型</span><br /><span style="color: #999999;">//宣告暫存現有字型指標的記憶體位址</span><br /><span style="color: #999999;">&nbsp; &nbsp; //設定字型進入DC</span><br /><span style="color: #999999;">&nbsp; &nbsp; //定義暫存字型指標的記憶體位址</span><br /><span style="color: #999999;">//顯示字</span><br /><span style="color: #999999;">//恢復設定暫存字型進入DC</span><br /><span style="color: #999999;">//清除字型設定</span><br /><br />BOOL bFont = FALSE;<br />CFont aFont;<br />CFont * p01dFont;<br />UINT nTxtSz(16);<br />CSize TextSize(nTxtSz, nTxtSz);<br /><br />bFont = aFont.CreateFont(TextSize.cx, 0, 0, 0, FW_NORMAL, 0, 0, 0, 0, 0, 0, 0, DEFAULT_PITCH|FF_MODERN, "Verdana");<br />if(bFont)<br />{<br /><span style="white-space: pre;">&nbsp;   </span>p01dFont = pDC-&gt;SelectObject(&amp;aFont); &nbsp;//設定新的時，會把目前的（舊的）給回傳出來<br /><span style="white-space: pre;">&nbsp;   </span>aFont.DeleteObject(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //砍掉剛設定的（新的）字型<br />}<br />pDC-&gt;TextOut(ptO.x + szSpace.cx + cellwidth, ptO.y + szSpace.cy, "10040406-A0C1BB2800004");<br />if (bFont)<br />{<br /><span style="white-space: pre;">&nbsp;   </span>pDC-&gt;SelectObject(p01dFont); //設定回原本的（舊的），回傳剛用過的<br /><span style="white-space: pre;">&nbsp;   </span>bFont = FALSE;<br />}<br /><br /><b><span style="font-size: large;">LOGFONT</span></b><br /><span style="color: #999999;">typedef struct tagLOGFONT {</span><br /><span style="color: #999999;">&nbsp; &nbsp; LONG lfHeight; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><br /><span style="color: #999999;">&nbsp; &nbsp; LONG lfWidth;</span><br /><span style="color: #999999;">&nbsp; &nbsp; LONG lfEscapement;</span><br /><span style="color: #999999;">&nbsp; &nbsp; LONG lfOrientation;</span><br /><span style="color: #999999;">&nbsp; &nbsp; LONG lfWeight;</span><br /><span style="color: #999999;">&nbsp; &nbsp; BYTE lfItalic;</span><br /><span style="color: #999999;">&nbsp; &nbsp; BYTE lfUnderline;</span><br /><span style="color: #999999;">&nbsp; &nbsp; BYTE lfStrikeOut;</span><br /><span style="color: #999999;">&nbsp; &nbsp; BYTE lfCharSet;</span><br /><span style="color: #999999;">&nbsp; &nbsp; BYTE lfOutPrecision;</span><br /><span style="color: #999999;">&nbsp; &nbsp; BYTE lfClipPrecision;</span><br /><span style="color: #999999;">&nbsp; &nbsp; BYTE lfQuality;</span><br /><span style="color: #999999;">&nbsp; &nbsp; BYTE lfPitchAndFamily;</span><br /><span style="color: #999999;">&nbsp; &nbsp; TCHAR lfFaceName[LF_FACESIZE];</span><br /><span style="color: #999999;">} LOGFONT, *PLOGFONT;</span><br /><br /><span style="font-size: large;"><b>example code:</b></span><br /><br /><span style="color: #999999;">void CExoView::OnDraw(CDC* pDC)</span><br /><span style="color: #999999;">{</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>CFont font;</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>LOGFONT LogFont;</span><br /><span style="color: #999999;"><br /></span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>LogFont.lfStrikeOut = 0;</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>LogFont.lfUnderline = 0;</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>LogFont.lfHeight = 42;</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>LogFont.lfEscapement = 0;</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>LogFont.lfItalic = TRUE;</span><br /><span style="color: #999999;"><br /></span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>font.CreateFontIndirect(&amp;LogFont);</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>CFont *pFont = pDC-&gt;SelectObject(&amp;font);</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>pDC-&gt;TextOut(20, 18, "James Kolowski", 14);</span><br /><span style="color: #999999;"><br /></span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>pDC-&gt;SelectObject(pFont);</span><br /><span style="color: #999999;"><span class="Apple-tab-span" style="white-space: pre;"> </span>font.DeleteObject();</span><br /><span style="color: #999999;">}</span><br />參考：<a href="http://www.ucancode.net/faq/CreateFont.htm">http://www.ucancode.net/faq/CreateFont.htm</a><br /><br />
