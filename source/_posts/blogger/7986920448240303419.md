---
title: "Code Complete II《軟體建構之道 2》#16 讀書心得與整理"
date: 2013-07-15T19:01:00.000+08:00
tags: 
- "Code Complete 2"
categories:
- 舊部落格移植文章
---

# Code Complete II《軟體建構之道 2》#16 讀書心得與整理

原文連結: https://darkblack01.blogspot.com/2013/07/code-complete-ii-216.html
移植時的最後更新日期: 2013-07-15T19:01:33.312+08:00

<h2><span style="font-size: x-large;">第十六章 控制迴圈<br />Controlling Loops</span></h2><br /><h3><span style="font-size: large;">16.1 選擇迴圈的種類<br />Selecting the Kind of Loop</span></h3><br />第一種分類方式<br /><ol><li>計數迴圈</li><li>條件式迴圈</li><li>無窮迴圈</li><li>迭代迴圈</li></ol>第二種分類方式<br /><ol>A. 由彈性來區分 <ol><li>執行一定的次數----&gt;使用for</li><li>檢查是否完成-----&gt;使用while並參考B分類</li></ol>B. 由檢迴圈完成與否的位置區分 <ol><li>開頭</li><li>中段</li><li>尾處</li></ol></ol>檢查處之前的程式碼，至少會執行一次。<br />檢查處之後的程式碼，不一定會執行。<br /><br /><a name='more'></a><br /><br /><h4>使用While迴圈的時機<br />When to Use a while Loop</h4><br />不知道重覆多少次時(A.2.類)<br /><ul><h4>前測式迴圈<br />Loop with Test at the Beginning</h4><pre class="prettyprint lang-cpp">while()<br />{}</pre><h4>後測試迴圈<br />Loop with Test at the End</h4><pre class="prettyprint lang-cpp">do{}<br />while();</pre><h4>使用loop-with-exit迴圈的使用時機(中段結束)<br />When to Use a loop-with-exit Loop</h4><ul><h4>正常的loop-with-exit迴圈<br />Normal loop-with-exit Loops</h4><pre class="prettyprint lang-cpp">while(1){<br />//...<br />if (somethingHappen)<br />  break;<br />//...<br />}</pre>1. 結束條件放在同一處<br />2. 單一出人口的結構(易於理解)<br />3. 可讀性高，符合人對重複控制方式的思考概念<br /><br /><h4>不正常的loop-with-exit迴圈<br />Abnormal loop-with-exit Loops</h4><pre class="prettyprint lang-cpp">goto Start;<br />while(expression){<br />//...<br />Start:<br />//...<br />}</pre>雖然唯一出入口，但是有兩個問題<br />1. 使用goto<br />2. 導致混亂<br /></ul></ul><h4>使用For迴圈的時機<br />When to Use a for Loop</h4><ul>執行一定次數的迴圈時<br />for迴圈:「迴圈控制」、「迴圈內容」是分開的，用於簡單的用途<br />for = foreach<br /></ul><br /><br /><h3><span style="font-size: large;">16.2 控制迴圈<br />Controlling the Loop</span></h3><br />迴圈可能發生的錯誤:<br /><ol><li>初始化不正確或漏掉了</li><li>累加器或其它迴圈控制變數沒有初始化</li><li>錯誤的巢狀結構</li><li>結束不正確</li><li>忘記使用迴圈變數的數值增加</li><li>迴圈索引值不正確</li></ol><br />兩項守則<br /><ol><li>簡化！簡化！簡化！(維護迴圈控制的概念整理性)</li><li>迴圈內部視為常式(降低迴圈控制和迴圈內容的耦合)<br />設計成黑盒子</li></ol><br /><h4>進入迴圈<br />Entering the Loop</h4>單一化<br />初始化變數(確定迴圈會開始)<br />無限迴圈 while(1)<br />固定次數 for() 不使用while，控制迴圈的程式可以包在一起<br />不固定次數 while() 不使用for，for的彈性會濫用<br /><br /><h4>處理迴圈內容<br />Processing the Middle of the Loop</h4>用{}包起來<br />避免空回圈、單一化迴圈功能<br />控制迴圈的部份留在開頭或結尾(確定迴圈會進行)<br /><br /><h4>離開迴圈<br />Exiting the Loop</h4>簡化迴圈終止的條件式(確定迴圈會結束)<br />迴圈結束後就不要使用迴圈索引值<br />考慮使用安全計數器<br /><br /><h4>提早離開迴圈<br />Exiting Loops Early</h4>在while中用break比bool變數好<br />太多break代表要拆成很多迴圈，而不是一個迴圈很多出口<br />使用continue是為了跳造迴圈主體大多數的code，若跳過的code少，就用if吧<br />如果語言支援，就用「break 標籤」的用法<br />謹慎使用break和continue<br />&nbsp; 單一陳述式-&gt;簡化迴圈<br />&nbsp; 使用break-&gt;增加迴圈複雜性<br /><br /><h4>檢查端點<br />Checking Endpoints</h4>三個要注意的地方：<br /><ol><li>第一次執行</li><li>最後一次執行</li><li>執行到一半</li></ol>要在心中模擬這三種情況。<br />這是好的程式設計師和壞的程式設計師的差別。<br /><br /><h4>使用迴圈變數<br />Using Loop Variables</h4>使用整數或列舉<br />有意義的變數提高可讀性，但是要避免重覆<br />變數Scop限制在迴圈中<br /><br /><h4>迴圈的理想長度為何？<br />How Long Should a Loop Be?</h4>一目了然<br />不超過三層巢狀<br />長型迴圈-&gt;單一出口<br />簡單迴圈-&gt;可以用break、continue、多重出口、複雜的結束式<br /><br /><br /><h3><span style="font-size: large;">16.3 輕鬆建立迴圈-由內而外<br />Creating Loops Easily—from the Inside Out</span></h3><br /><ol><li>用常數開始</li><li>在文字外圍加迴圈，用變數取代常數</li><li>重覆2.</li></ol><br /><h3><span style="font-size: large;">16.4 迴圈與陣列間的關聯性<br />Correspondence Between Loops and Arrays</span></h3><br />不一定有關係<br /><br />
