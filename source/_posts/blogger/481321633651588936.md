---
title: （重載）多載運算子
date: 2012-02-21T14:59:00.003+08:00
tags: 
- C_and_Cpp

categories:
- 舊部落格移植文章
---

# （重載）多載運算子

原文連結: https://darkblack01.blogspot.com/2012/02/blog-post_5205.html
移植時的最後更新日期: 2015-12-23T14:16:57.680+08:00

因為上網查太多次了，每次又查到想翻書算了，翻書翻到覺得書寫得太多了。<br />所以乾脆自己來寫一篇簡單小筆記<br /><br />operator系列<br /><a name='more'></a><br /><span style="font-size: large;"><b>operator=</b></span><br />assignment<br /><pre class="prettyprint"><code>//String.h<br />class String{<br />public:<br />    //....<br />    String&amp; operator=( const char*);<br />    String&amp; operator=( const String&amp;);<br />    //....<br />private:<br />    int _size;<br />    char *_string;<br />}</code></pre><pre class="prettyprint"><code>//String.cpp<br />String&amp; String::operator=(const char* sobj)<br />{<br />    //...<br />    return *this;<br />}</code></pre><span style="font-size: large;"><b>operator()</b></span><br />function call<br />某個class代表某動作<br /><pre class="prettyprint"><code>//absInt.h<br />class absInt{<br />public:<br />    int operator()(int val)<br />    {<br />        int result = val &lt; 0 ? -val : val;<br />        return result;<br />    }<br />}</code></pre><pre class="prettyprint"><code>//main.cpp<br />typedef vector<int>::iterator iter_type;<br /><br />iter_type transform(iter_type iter, iter_type last,<br />                    iter_type result, absInt func)<br />{<br />    while(iter != last)<br />        *result++ = func( *iter++ ); //invokes absInt::operator()<br />    return iter;<br />}<br /><br />int main()<br />{<br />    int ia[] = {-0, 1, -1, -2 ,3, 5, -5, 8};<br />    vector<int> ivec(ia, ia+8);<br /><br />    transform(ivec.begin(), ivec.end(), ivec.begin(), absInt());<br />    //...<br />    return 0;<br />}</int></int></code></pre><span style="font-size: large;"><b>operator-&gt;</b></span><br />member access arrow<br />適用於Smart point class<br /><pre class="prettyprint"><code>//ScreenPtr.h<br />class ScreenPtr{<br />    //...<br />private:<br />    Screen *ptr;<br />public:<br />    ScreenPtr(Screen &amp;s) : ptr(&amp;s){} //construct<br />    void move(int , int);//keyin by myself<br />    Screen&amp;  operator *(){ return *ptr;}<br />    Screen*  operator -&gt;(){ return ptr;}<br />    //...<br />};</code></pre><pre class="prettyprint"><code>//main.cpp<br />int main()<br />{<br />    Screen p1//error<br /><br />    Screen myScreen(4, 4);<br />    ScreenPtr ps( myScreen );  //ok by construct<br />    ps-&gt;move(2, 3);<br />    return 0;<br />}</code></pre><span style="font-size: large;"><b>operator++<br />operator--</b></span><br />分成前置版和後置版<br /><pre class="prettyprint"><code>//ScreenPtr.h<br />class ScreenPtr{<br />private:<br />    Screen *ptr;<br />public:<br />    Screen&amp; operator++();    //prefix operators<br />    Screen* operator--();<br />    Screen&amp; operator++(int); //postfix operators<br />    Screen&amp; operator--(int);<br />    //...<br />};</code></pre><pre class="prettyprint"><code>//ScreenPtr.cpp<br />//prefix operators<br />Screen&amp; ScreenPtr::operator++()<br />{<br />    //...<br />    return *++ptr;<br />}<br /><br />Screen&amp; ScreenPtr:: operator --()<br />{<br />    //...<br />    return *--ptr;<br />}<br /><br />//postfix operators<br />Screen&amp; ScreenPtr:: operator ++(int)<br />{<br />    //...<br />    return *++ptr;<br />}<br /><br />Screen&amp; ScreenPtr:: operator --(int)<br />{<br />    //...<br />    return *--ptr;<br />}</code></pre><span style="font-size: large;"><b>operator new<br />operator delete</b></span><br /><pre class="prettyprint"><code>class ScreenPtr{<br />private:<br />    Screen *ptr;<br />public:<br />    void*  operator new(size_t);<br />    void   operator delete(void*);<br />    //...<br />};</code></pre><span style="font-size: large;"><b>operator new[]&nbsp;<br />operator delete[]</b></span><br />//--------------------<br /><span style="font-size: large;"><b>operator&lt;</b></span><br /><pre class="prettyprint"><code>//String.h<br />class String{<br />public:<br />    //....<br />    String&amp; operator=( const char*);<br />    String&amp; operator=( const String&amp;);<br />    int GetInt();<br />    //....<br />private:<br />    int _size;<br />}</code></pre><pre class="prettyprint"><code>//String.cpp<br />bool operator&lt;(const ScreenPtr&amp; pStr) const<br />{ <br />    return (GetInt() &lt;  pStr.GetInt() );<br />}</code></pre><span style="font-size: large;"><b>operator==</b></span><br /><pre class="prettyprint"><code>//String.cpp<br />bool operator==(const ScreenPtr& pStr)const<br />{<br />    return (GetInt() ==  pStr.GetInt() );<br />}</code></pre>
