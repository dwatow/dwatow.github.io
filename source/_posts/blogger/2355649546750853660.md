---
title: Django View 小筆記
date: 2016-06-04T13:50:00.003+08:00
tags: 
- Django

categories:
- 舊部落格移植文章
---

# Django View 小筆記

原文連結: https://darkblack01.blogspot.com/2016/06/django-view.html
移植時的最後更新日期: 2016-06-04T13:52:59.294+08:00

<br />這個做法是把loading放在template，弱化了url, view的code.<br />算是把重心放到前端上的技巧。<br /><br />在此使用的Model如下<br />Model<br /><pre class="prettyprint"><code class="language-python">class TestObj(models.Model):<br />    name = models.CharField(max_length=10)<br />    create_datetime = models.DateTimeField()<br /><br />    def __str__(self):<br />        return "%s, %s" % (self.name, self.create_datetime.date())<br /></code></pre><br /><br />Url<br />url有一個變數稱為pk, pk是primay key的縮寫, 在此要填的是主key的值。<br /><pre class="prettyprint"><code class="language-python">from django.conf.urls import url<br />from . import views<br /><br /><br />urlpatterns = [<br /> #...<br />    #test View<br />    url(r'^test/(?P<pk>[0-9]+)/$', views.TestObjView.as_view(), name='test'),<br />]<br /></code></pre><br />View<br /><br />view有兩種，一個是取model物件的DetailView，一個是取QuerySet的ListView<br /><br />ListView<br />template_name 預設值為&lt;app name&gt;/&lt;template name&gt;_list.html<br /><pre class="prettyprint"><code class="language-python"># -*- coding: utf-8 -*-<br />from . import models<br />from django.views import generic<br /><br />class TestObjView(generic.ListView):<br />    model = models.TestObj<br /> #template_name = 'testobj.html' #可自行手動指定<br /></code></pre><br />DetailView<br />template_name 預設值為&lt;app name&gt;/&lt;template name&gt;_detail.html<br />另一個是ListView, 顯示QuerySet的結果。<br />預設Query完的變數名稱: &lt;model name&gt;_list<br /><pre class="prettyprint"><code class="language-python"># -*- coding: utf-8 -*-<br />class TestObjView(generic.ListView):<br />    model = models.TestObj<br /> #template_name = 'testobj.html' #可自行手動指定<br /></code></pre><br />TEMPLATE<br />依你設定的View來決定template的命名。<br /><br />必須要先接list裡的物件出來<br />在此示範使用預設檔名 testobj_list.html<br /><pre class="prettyprint"><code class="language-html">{% for testobj in testobj_list %}<br /> {{testobj.name}}<br />{% empty %}<br />無資訊<br/><br />{% endfor %}<br /></code></pre><br />直接取屬性出來顯示<br />在此示範使用預設檔名 testobj_detail.html<br /><pre class="prettyprint"><code class="language-html">{{testobj.name}}<br /></code></pre>
