---
title: "爛 code 收集器//過度依賴全域變數"
date: 2018-05-20T15:01:00.000+08:00
tags: 
- "爛 code 收集器"
categories:
- 舊部落格移植文章
---

# 爛 code 收集器//過度依賴全域變數

原文連結: https://darkblack02.blogspot.com/2018/05/code.html
移植時的最後更新日期: 2020-02-28T10:41:21.252+08:00

建構式初始化了一堆....全域變數？ 全部都宣告成靜態變數!!!  可以查一下 global 前綴的變數有多少。 卻放在建構式裡初始化。   <br /><pre class="prettyprint"><code class="language-cpp"><br />public partial class App : Application<br />{<br />  public class IniInfo<br />  {<br />  //一堆屬性<br /><br />    public IniInfo()<br />    {<br />      //真正的建構式<br />    }<br /><br />    private static string IniPlusReadString(string m_Section)<br />    {<br />      //讀取ini檔的設定<br />    }<br />  }<br /><br />  public static Component1 globalComponent1 ;<br />  public static string globalAppImagePath =<br />          System.IO.Path.GetDirectoryName(Process.GetCurrentProcess().MainModule.FileName) + @"\ObjectImages";<br />  public static string globalAppRecipePath =<br />          System.IO.Path.GetDirectoryName(Process.GetCurrentProcess().MainModule.FileName) + @"\Recipes";<br />  public static string globalIniPath = // filename<br />  public static SplashScreenWindow globalSplashScreenWindow;<br />  public static Component2 globalEvent;<br />  public static Log globalLog;<br />  public static ClientHandle globalMessageHandle;<br />  public static MessageLoadedHelper globalMessageLoadedHelper;<br />  public static SingleHandle globalSingleHandle;<br />  public static IniInfo globalIniInfo;<br />  public static Dictionary&lt;string queryindicatorsettinglobalresult.indicatorsettinginfo=""&gt; globalIndicatorSettingDic =<br />          new Dictionary&lt;string queryindicatorsettinglobalresult.indicatorsettinginfo=""&gt;();<br />  public static CultureInfo globalCultureInfo = null;<br /><br />  public App()<br />  {<br />    //初始化物件<br />  }<br />}<br /></code></pre>不應該過渡依賴全域變數，應該要將該變數變成 class 裡的變數，並且若需要值的傳遞時，必須要透過 method 進行。 這樣 trace bug 也直覺，也更好防堵 bug 產生。  無言的聲音:  浪費了 c# 的物件導向....微軟的工程師，辛苦了...你們的辛苦寫的程式碼，完無沒有體現價值。  
