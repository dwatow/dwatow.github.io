---
title: "Ubuntu//gcc小筆記"
date: 2013-05-18T16:35:00.003+08:00
tags: 
- "Ubuntu"
categories:
- 舊部落格移植文章
---

# Ubuntu//gcc小筆記

原文連結: https://darkblack01.blogspot.com/2013/05/ubuntugcc.html
移植時的最後更新日期: 2013-05-20T09:52:17.311+08:00

<span style="font-size: large;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style="color: #3d85c6;">main.c</span></span><span style="font-size: large;">&nbsp;&nbsp;→ &nbsp;main.s</span><span style="font-size: large;">&nbsp;</span><span style="font-size: large;">&nbsp;→ &nbsp;</span><span style="color: #38761d; font-size: large;">main.o</span><span style="font-size: large;"> &nbsp;&nbsp;→ &nbsp;</span><span style="color: #cc0000; font-size: large;">main</span><br /><span style="color: #3d85c6; font-size: large;">source code</span><span style="font-size: large;">&nbsp;</span><span style="font-size: large;">&nbsp;→ &nbsp;assembly file</span><span style="font-size: large;">&nbsp;&nbsp;→ &nbsp;<span style="color: #38761d;">object file</span></span><span style="font-size: large;">&nbsp;</span><span style="font-size: large;">&nbsp;→ &nbsp;</span><span style="color: #cc0000; font-size: large;">binary file</span><br /><br />source code: 文字檔，就是程式碼本身<br />assembly file: 組合語言檔，組合語言程式碼<br />object file: 二進制的檔案，不可以單獨執行<br />binary file: 二進制檔案，執行檔<br /><br /><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif; font-size: large;">$ gcc main.c</span><br />產生一個預設檔名(a.out)的binary檔<br /><br /><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif; font-size: large;">$ gcc <span style="color: blue;">-c</span> main.c</span></code><br /><span style="color: blue;">產生一個和main.c同名的main.o檔</span><br /><br /><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif; font-size: large;">$ gcc <span style="color: blue;">-o main</span> man.c</span></code><br /><span style="color: blue;">產生一個main的binary檔</span><br /><br /><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif; font-size: large;">$ gcc <span style="color: blue;">-S </span>main.c</span></code><br /><span style="color: blue;">產生一個main.s的組合語言檔</span><br /><br /><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif; font-size: large;">$ gcc <span style="color: blue;">-E&nbsp;</span>main.c</span></code><br /><span style="color: blue;">顯示預處理器加的+你自己打的程式碼，不產生任何檔案</span><br /><br /><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif; font-size: large;">$ gcc <span style="color: blue;">-O</span> main.c</span></code><br /><span style="color: blue;">速度最佳化</span>，產生a.out(同gcc main.c)<br /><br /><span style="font-size: large;"><b>Sample code：</b></span><br /><pre class="prettyprint"><code class="language-c">//hello.c<br />#include &lt;stdio .h&gt;<br /><br />void hello()<br />{<br />    printf("hello function");<br />}</code></pre><pre class="prettyprint"><code class="language-c">//main.c<br />#include &lt;stdio .h&gt;<br /><br />int main()<br />{<br />    hello();    //call hello function in hello.c<br />    printf("hello main");<br /><br />    return 0;<br />}</code></pre><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif;">$ gcc -c hello.c</span></code><br /><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif;">$ gcc -c main.c</span></code><br />處理.c檔，產生hello.o和main.o檔（各別將兩個檔案編譯好）<br /><br /><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif;">$ gcc -o main main.o hello.o</span></code><br />處理.o檔，組合main.o和hello.o檔，並產生main的binary檔<br /><br /><br /><b>加入函式庫</b><br /><code><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif;">$ gcc -c main.c <span style="color: blue;">-l -L/(path)</span></span></code><br />-l: 要加入lib (*.so <span style="color: #999999;">動態函式庫</span>, *.a <span style="color: #999999;">靜態函式庫</span>)<br />-L: 加入的lib路徑在哪<br /><br /><b>找#include &lt;xxx.h&gt;的路徑</b><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">$ gcc -c main.c</span><br /><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif;">main.c:3:20: 嚴重錯誤： ***.h：沒有此一檔案或目錄</span><br /><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif;">編譯插斷。</span><br />這種情況是你加入的*.h檔找不到，也就是要給予該檔的路徑<br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">$ gcc -c main.c <span style="color: blue;">-I/(path)</span></span><br />-I加入include的搜尋.h檔的路徑<br /><br /><br />參考資料<br /><span style="font-family: Helvetica Neue, Arial, Helvetica, sans-serif;">[1] $man gcc</span><br />[2]&nbsp;<a href="http://jyhshin.pixnet.net/blog/post/26588012-gcc-%E5%8F%83%E6%95%B8-%E5%82%99%E8%A8%BB">gcc 參數 備註</a><br />[3]&nbsp;<a href="http://linux.vbird.org/linux_basic/0520source_code_and_tarball.php#simple_ex">鳥哥的 Linux 私房菜 -- 使用傳統程式語言進行編譯的簡單範例</a><br />[4]&nbsp;<a href="http://www.wretch.cc/blog/Geniusking/7263728">GCC常用編譯參數</a>&nbsp; ←簡單易懂<br />[5]&nbsp;<a href="http://bbs.mychat.to/sindex.php?t211831.html">GCC使用簡介</a><br />[6]&nbsp;<a href="http://linux.vbird.org/linux_basic/0520source_code_and_tarball.php#library">鳥哥的 Linux 私房菜 -- 函式庫管理</a>
